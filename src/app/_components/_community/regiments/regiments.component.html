<!--
File: c:\Users\tonyw\Desktop\WoRTool NG\ng-paapp2\src\app\regiments\regiments.component.html
Project: c:\Users\tonyw\Desktop\WoRTool NG\ng-paapp2
Created Date: Sunday July 2nd 2023
Author: Tony Wiedman
-----
Last Modified: Sat November 18th 2023 1:03:23 
Modified By: Tony Wiedman
-----
Copyright (c) 2023 Tone Web Design, Molex
-->

<div class="relative">
	<div class="fixed top-0 left-0 right-0 bottom-0 z-50 bg-slate-900/90 cursor-pointer" [hidden]="!showOverlay"
		(click)="toggleOverlay()">
		<div class="flex justify-center items-center h-full">
			<div class="lg:w-[70vw] w-full m-auto" id="overlayContainer">
				<div (click)="handleClickInside($event)" class="cursor-default">
					<app-add-bot></app-add-bot>
				</div>
				<div class="text-right mt-4">
					<button mat-stroked-button color="primary" class="!text-lg" (click)="closeOverlay($event)"><i
							class="fa-solid fa-xmark mr-1"></i> Close</button>
				</div>
			</div>
		</div>
	</div>
</div>





<div class="lg:w-[72vw] w-[100vw - 2em] m-auto lg:mt-[3.5em] mt-[2em]">

	<div class="grid lg:grid-cols-[auto_1fr_auto] grid-cols-[1fr_2fr] gap-4 my-2 mb-8">

		<div>
			<div class="field-box">
				<select [(ngModel)]="selectedSide" (change)="filterRegiments()" style=" padding-top: 11px;
				padding-bottom: 11px;
				padding-left: 10px;
				font-size: 15px;
				border: 1px solid #7c7d72 !important;" class="field-input2 inline-block">
					<option value="all">All Sides</option>
					<option value="USA">Union</option>
					<option value="CSA">Confederate</option>
				</select>
			</div>
		</div>

		<div>
			<div class="field-box">
				<input [(ngModel)]="searchText" (input)="filterRegiments()" type="text" style="
		  padding-top: 11px;
		  padding-bottom: 11px;
		  font-size: 15px;
		  border: 1px solid #7c7d72 !important;
		" class="field-input" placeholder="Filter Regiment Name..">
				<i class="fa-solid fa-search field-icon"></i>
			</div>
		</div>

		<div class="lg:col-start-3 lg:row-start-1 lg:col-span-1 hidden lg:inline-block">
			<button mat-stroked-button color="primary" class="!h-[46.5px] w-full !text-[#a09e94] !font-[500]"
				style="border: 1px solid #7c7d72 !important;" (click)="toggleOverlay()"><i
					class="fa-regular fa-circle-question mr-1"></i> Add Regiment</button>
		</div>

	</div>





	<div class="grid lg:grid-cols-2 grid-cols-1 gap-4" *ngIf="regiments">

		

		<div *ngFor="let regiment of paginatedRegiments">


			<div class="rounded-lg w-full bg-slate-900/80 shadow-lg scale-center">
				<!-- Top -->
				<a [href]="'/regiments/' + regiment.id">
					<div class="grid grid-cols-[78px_auto] w-full reg-header">
						<div class="text-left rounded-t-lg"
							style="background: linear-gradient(130deg,#263855e1,#1e293b00,#1e293b00,#1e293b00);">
							<img [src]="regiment.guild_avatar"
								class="h-[75px] w-auto rounded-tl-lg shadow-md pointer-events-none brightness-90 sepia-[30%]">
						</div>
	
						<div class="flex items-center rounded-t-lg h-full w-full"
							style="background: linear-gradient(-25deg,#263855e1,#1e293b00,#1e293b00,#1e293b00);">
							<div class="flex-grow">
								<div class="grid lg:grid-cols-[auto_100px] grid-cols-[auto] grid-container">
	
									<div class="flex lg:items-center lg:justify-center pl-2 lg:pl-0">
										<div class="text-slate-400 lg:text-xl font-[500] lg:text-center">
											{{ regiment.regiment }}
											<span class="block font-[500] lg:p-1 lg:text-center lg:text-base">
	
												<span *ngIf="regiment.side == 'CSA'"
													class="text-[#838479]">Confederate</span>
												<span *ngIf="regiment.side == 'USA'"
													class="text-[#6488c5]">Union</span>
	
												<span class="pl-2" *ngIf="!regiment.memberCount; else memberCount">
													<span *ngIf="regiment.side == 'CSA'">
														<span class="wave-csa"></span>
														<span class="wave-csa"></span>
														<span class="wave-csa"></span>
													</span>
	
													<span *ngIf="regiment.side == 'USA'">
														<span class="wave-usa"></span>
														<span class="wave-usa"></span>
														<span class="wave-usa"></span>
													</span>
	
												</span>
	
	
												<ng-template #memberCount> 
													<span *ngIf="regiment.side == 'CSA'" class="font-[300] text-sm pl-2 text-[#838479]">({{ regiment.memberCount }} members)</span>
													<span *ngIf="regiment.side == 'USA'" class="font-[300] text-sm pl-2 text-[#6488c5]">({{ regiment.memberCount }} members)</span>
												</ng-template>
											</span>
										</div>
									</div>
										
	
								</div>
							</div>
						</div>
	
					</div>
				</a>
				
				<!--  -->
				<mat-divider></mat-divider>
				<!--  -->
				
					<div class="grid lg:grid-cols-[2fr_0.5fr] grid-cols-[2fr_1fr] bg-slate-800/80 rounded-b-lg min-h-[180px] max-h-[180px]">
						
						<div class="font-[300] hidden xl:inline-block p-3 overflow-hidden">
							{{ ellipsisText(regiment.description, 320) }}
						</div>
					
						<div class="font-[300] inline-block xl:hidden p-3 overflow-hidden">
							{{ ellipsisText(regiment.description, 155) }}
						</div>
					
						<div class="flex flex-col justify-center items-center bg-[#1e293b] brightness-105 shadow-md rounded-br-lg overflow-hidden">
							<span class="font-[200] text-xs text-neutral-300">Links</span>
							<button (click)="open(regiment.invite_link)" mat-button color="primary" class="!w-[80px] !text-2xl">
								<i class="fa-brands fa-discord"></i>
							</button>
					
							<button *ngIf="regiment.website" (click)="open(regiment.website)" mat-button color="primary" class="!w-[80px] !text-2xl">
								<i class="fa-solid fa-globe"></i>
							</button>
					
							<button [routerLink]="['/regiments', regiment.id]" mat-stroked-button color="primary" class="!text-neutral-300 mt-1 !block !min-h-fit !w-auto !max-w-[115px] !p-1 !px-4 !text-base">
								View <i class="fa-regular fa-circle-right pl-1"></i>
							</button>
						</div>
					</div>

			

				
				

			</div>


		</div>

	</div>


	<div class="w-full text-center mt-6">

		<div class="pagination">
			<button (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
			<ng-container *ngFor="let page of getPagesArray(totalPages()); let i = index">
			  <button (click)="changePage(i + 1)" [class.active]="currentPage === i + 1">
				{{ i + 1 }}
			  </button>
			</ng-container>
			<button (click)="nextPage()" [disabled]="currentPage === totalPages()">Next</button>
		  </div>
	</div>

</div>