<div *ngIf="showAdmin || showMod">
	<mat-table [dataSource]="users"
		class>
		<ng-container matColumnDef="id">
			<mat-header-cell *matHeaderCellDef>Id</mat-header-cell>
			<mat-cell *matCellDef="let user">{{user.id}}</mat-cell>
		</ng-container>
		<ng-container matColumnDef="nickname">
			<mat-header-cell *matHeaderCellDef>Nickname</mat-header-cell>
			<mat-cell *matCellDef="let user">
				<ng-container *ngIf="editingUser === user; else displayNickname">
					<mat-form-field appearance="fill">
						<mat-label>Nickname</mat-label>
						<input [(ngModel)]="editingUser.nickname"
							matInput
							name="nickname">
					</mat-form-field>
				</ng-container>
				<ng-template #displayNickname>{{user.nickname}}</ng-template>
			</mat-cell>
		</ng-container>
		<ng-container matColumnDef="regiment">
			<mat-header-cell *matHeaderCellDef>Regiment</mat-header-cell>
			<mat-cell *matCellDef="let user">
				<ng-container *ngIf="editingUser === user; else displayRegiment">
					<mat-form-field appearance="fill">
						<mat-label>Regiment</mat-label>
						<input [(ngModel)]="editingUser.regiment"
							matInput
							name="regiment">
					</mat-form-field>
				</ng-container>
				<ng-template #displayRegiment>{{user.regiment}}</ng-template>
			</mat-cell>
		</ng-container>
		<ng-container matColumnDef="events">
			<mat-header-cell *matHeaderCellDef>Events</mat-header-cell>
			<mat-cell *matCellDef="let user">
				<mat-form-field appearance="fill">
					<mat-label>Events</mat-label>
					<input [(ngModel)]="user.events"
						(change)="updateEvents($event, user)"
						matInput
						type="number"
						name="events">
				</mat-form-field>
			</mat-cell>
		</ng-container>
		<ng-container matColumnDef="drills">
			<mat-header-cell *matHeaderCellDef>Drills</mat-header-cell>
			<mat-cell *matCellDef="let user">
				<mat-form-field appearance="fill">
					<mat-label>Drills</mat-label>
					<input [(ngModel)]="user.drills"
						(change)="updateDrills($event, user)"
						matInput
						type="number"
						name="drills">
				</mat-form-field>
			</mat-cell>
		</ng-container>
		<ng-container matColumnDef="lastmuster">
			<mat-header-cell *matHeaderCellDef>Lastmuster</mat-header-cell>
			<mat-cell *matCellDef="let user">
				<ng-container *ngIf="editingUser === user; else displayLastmuster">
					<mat-form-field appearance="fill">
						<mat-label>Lastmuster</mat-label>
						<input [(ngModel)]="editingUser.lastmuster"
							matInput
							name="lastmuster">
					</mat-form-field>
				</ng-container>
				<ng-template #displayLastmuster>{{user.lastmuster}}</ng-template>
			</mat-cell>
		</ng-container>
		<ng-container matColumnDef="joindate">
			<mat-header-cell *matHeaderCellDef>Joindate</mat-header-cell>
			<mat-cell *matCellDef="let user">
				<ng-container *ngIf="editingUser === user; else displayJoindate">
					<mat-form-field appearance="fill">
						<mat-label>Joindate</mat-label>
						<input [(ngModel)]="editingUser.joindate"
							matInput
							name="joindate">
					</mat-form-field>
				</ng-container>
				<ng-template #displayJoindate>{{user.joindate}}</ng-template>
			</mat-cell>
		</ng-container>
		<ng-container matColumnDef="actions">
			<mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
			<mat-cell *matCellDef="let user">
				<div *ngIf="editingUser === user">
					<button (click)="saveUser()"
						mat-raised-button
						color="primary">
						Save
					</button>
					<button (click)="cancelEdit()"
						mat-raised-button
						color="warn">
						Cancel
					</button>
				</div>
				<div *ngIf="editingUser !== user">
					<button (click)="editUser(user)"
						mat-raised-button
						color="accent">
						Edit
					</button>
				</div>
			</mat-cell>
		</ng-container>
		<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
		<mat-row *matRowDef="let user; columns: displayedColumns;"></mat-row>
	</mat-table>
</div>
