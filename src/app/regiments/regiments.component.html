<!--
File: c:\Users\tonyw\Desktop\WoRTool NG\ng-paapp2\src\app\regiments\regiments.component.html
Project: c:\Users\tonyw\Desktop\WoRTool NG\ng-paapp2
Created Date: Sunday July 2nd 2023
Author: Tony Wiedman
-----
Last Modified: Thu August 3rd 2023 1:54:05 
Modified By: Tony Wiedman
-----
Copyright (c) 2023 Tone Web Design, Molex
-->

<div class="lg:w-[72vw] w-[100vw - 2em] m-auto lg:mt-[3.5em] mt-[2em]">

	<div class="grid grid-cols-[1fr_3fr_0.5fr] gap-4 my-2 mb-8">

		<div>
			<div class="field-box">
				<select [(ngModel)]="selectedSide" (change)="filterRegiments()" style=" padding-top: 11px;
				padding-bottom: 11px;
				padding-left: 10px;
				font-size: 15px;
				border: 1px solid #7c7d72 !important;" class="field-input2 inline-block">
					<option value="all">All Sides</option>
					<option value="USA">Union</option>
					<option value="CSA">Confederate</option>
				</select>
			</div>
		</div>

		<div>
			<div class="field-box">
				<input [(ngModel)]="searchText" (input)="filterRegiments()" type="text" style="
		  padding-top: 11px;
		  padding-bottom: 11px;
		  font-size: 15px;
		  border: 1px solid #7c7d72 !important;
		" class="field-input" placeholder="Filter Regiment Name..">
				<i class="fa-solid fa-search field-icon"></i>
			</div>
		</div>

		<div>
			<button mat-raised-button color="primary" class="!h-[46.5px] w-full !text-[#a09e94] !font-[500] !bg-[#646258bb]">Add Regiment</button>
		</div>

	</div>





	<div class="grid lg:grid-cols-2 grid-cols-1 gap-4">


		<div *ngFor="let regiment of getPaginatedRegiments()">


			<div class="rounded-lg w-full bg-slate-900/80 shadow-lg">
				<!-- Top -->
				<div class="grid grid-cols-[78px_auto] w-full">
					<div class="text-left rounded-t-lg"
						style="background: linear-gradient(130deg,#263855e1,#1e293b00,#1e293b00,#1e293b00);">
						<img [src]="regiment.guild_avatar"
							class="h-[75px] w-auto rounded-tl-lg shadow-md pointer-events-none brightness-90 sepia-[50%]">
					</div>

					<div class="flex items-center rounded-t-lg h-full w-full"
						style="background: linear-gradient(-25deg,#263855e1,#1e293b00,#1e293b00,#1e293b00);">
						<div class="flex-grow">
							<div class="grid grid-cols-[auto_100px]">

								<div class="flex items-center justify-center">
									<div class="text-slate-400 text-xl font-[500] text-center">
										{{ regiment.regiment }}
										<span class="block font-[300] p-1 text-center text-sm">{{regiment.side}}
											Regiment<span *ngIf="regiment.memberCount">, {{ regiment.memberCount }}
												members</span></span>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
				<!--  -->
				<mat-divider></mat-divider>
				<!--  -->
				<div class="grid grid-cols-[2fr_0.5fr] bg-slate-800/80 rounded-b-lg min-h-[180px] max-h-[180px]">
					<div class="font-[300] hidden xl:inline-block p-3">
					  {{ ellipsisText(regiment.description, 256) }}
					</div>
				  
					<div class="font-[300] inline-block xl:hidden p-3">
					  {{ ellipsisText(regiment.description, 155) }}
					</div>
				  
					<div class="flex flex-col justify-center items-center bg-[#1e293b] brightness-105 shadow-md rounded-br-lg">
					<span class="font-[200] text-sm text-neutral-300">Links</span>
					  <button (click)="open(regiment.invite_link)" mat-button color="primary" class="!w-[80px] !text-2xl">
						<i class="fa-brands fa-discord"></i>
					  </button>
				  
					  <button *ngIf="regiment.website" (click)="open(regiment.website)" mat-button color="primary"
						class="!w-[80px] !text-2xl">
						<i class="fa-solid fa-globe"></i>
					  </button>
				  
					  <button [routerLink]="['/regiments', regiment.id]" mat-stroked-button color="primary"
						class="!text-neutral-300 mt-1 !block !min-h-fit !w-[80px] !p-1 !px-4 font-[300] !text-base">
						Details
					  </button>
					</div>
				  </div>
				  
			</div>


		</div>

	</div>


	<div class="w-full text-center mt-6">

		<button matTooltipClass="form-tooltip" matTooltipPosition="above" matTooltip="First Page" type="button"
			class="pagination-button" (click)="goToPage(1)" [disabled]="currentPage === 1"><i
				class="fa-solid fa-angles-left"></i></button>

		<button matTooltipClass="form-tooltip" matTooltipPosition="above" matTooltip="Previous Page" type="button"
			class="pagination-button" (click)="previousPage()" [disabled]="currentPage === 1"><i
				class="fa-solid fa-angle-left"></i></button>

		<button type="button" class="pagination-button" (click)="goToPage(currentPage - 1)"
			[hidden]="currentPage === 1">{{ currentPage - 1 }}</button>
		<button type="button" class="pagination-button" [disabled]="true">{{ currentPage }}</button>
		<button type="button" class="pagination-button" (click)="goToPage(currentPage + 1)"
			[hidden]="currentPage === getTotalPages()">{{ currentPage + 1 }}</button>

		<button matTooltipClass="form-tooltip" matTooltipPosition="above" matTooltip="Next Page" type="button"
			class="pagination-button" (click)="nextPage()" [disabled]="currentPage === getTotalPages()"><i
				class="fa-solid fa-angle-right"></i></button>

		<button matTooltipClass="form-tooltip" matTooltipPosition="above" matTooltip="Last Page" type="button"
			class="pagination-button" (click)="goToPage(getTotalPages())"
			[disabled]="currentPage === getTotalPages()"><i class="fa-solid fa-angles-right"></i></button>
	</div>

</div>